<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>架空世界地圖 - PLLT World</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    
    <!-- Font Awesome 圖標庫 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 自定義CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="map"></div>
    <div class="map-title">PLLT World Map</div>
    
    <div class="map-legend">
        <h3>圖例</h3>
        <!-- 圖例會由JavaScript動態生成 -->
        <div id="map-legend-items"></div>
    </div>
    
    <!-- 標記控制面板 -->
    <div class="marker-controls">
        <h3>標記工具</h3>
        <button id="add-marker-btn" onclick="beginAddMarker()">添加標記</button>
        <button id="cancel-marker-btn" style="display:none;" onclick="cancelAddMarker()">取消</button>
        <div id="marker-form" style="display:none;">
            <input type="text" id="marker-name" placeholder="標記名稱">
            <select id="marker-type">
                <option value="自定義">自定義</option>
                <option value="主城">主城</option>
                <option value="水域">水域</option>
                <option value="森林">森林</option>
                <option value="秘境">秘境</option>
            </select>
            <textarea id="marker-description" placeholder="描述（可選）"></textarea>
            <button id="save-marker-btn" onclick="saveMarker()">保存</button>
        </div>
        
        <!-- 距離測量工具 -->
        <div class="measure-tools">
            <h4>距離測量</h4>
            <button id="measure-distance-btn" onclick="startMeasuring()">測量距離</button>
            <button id="cancel-measure-btn" style="display:none;" onclick="cancelMeasuring()">取消測量</button>
            <div id="measure-result" class="measure-result" style="display:none;"></div>
        </div>
        
        <!-- 匯入/匯出工具 -->
        <div class="data-tools">
            <h4>資料管理</h4>
            <button id="export-markers-btn" onclick="exportMarkers()">匯出標記</button>
            <button id="import-markers-btn" onclick="document.getElementById('import-file').click()">匯入標記</button>
            <input type="file" id="import-file" accept=".json" style="display:none;" onchange="handleFileImport(event)">
        </div>
        
        <div class="marker-list-container">
            <h4>已標記地點</h4>
            <div class="location-filter">
                <select id="location-filter">
                    <option value="all">全部地點</option>
                    <option value="type-main">主城</option>
                    <option value="type-water">水域</option>
                    <option value="type-forest">森林</option>
                    <option value="type-secret">秘境</option>
                    <option value="type-custom">自定義</option>
                </select>
            </div>
            <ul id="user-markers-list"></ul>
        </div>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <!-- 地圖資料庫 -->
    <script src="js/locations-data.js"></script>
    
    <!-- 自定義JS -->
    <script src="js/map.js"></script>
</body>
</html>